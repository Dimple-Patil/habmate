<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HabMate - Track Your Habits, Follow Friends</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="css/theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<style>
    /* HabMate - Main Stylesheet */

/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --primary-color: #4a6fa5;
    --secondary-color: #166088;
    --accent-color: #4fc3a1;
    --light-color: #f8f9fa;
    --dark-color: #343a40;
    --gray-color: #6c757d;
    --light-gray: #e9ecef;
    --success-color: #28a745;
    --warning-color: #ffc107;
    --danger-color: #dc3545;
    --border-radius: 8px;
    --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    --transition: all 0.3s ease;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    line-height: 1.6;
    color: var(--dark-color);
    background-color: var(--light-color);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    transition: var(--transition);
}

.container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    flex: 1;
}

/* Typography */
h1, h2, h3, h4 {
    margin-bottom: 1rem;
    color: var(--dark-color);
}

h1 {
    font-size: 2.5rem;
}

h2 {
    font-size: 2rem;
}

h3 {
    font-size: 1.5rem;
}

p {
    margin-bottom: 1rem;
}

a {
    color: var(--primary-color);
    text-decoration: none;
    transition: var(--transition);
}

a:hover {
    color: var(--secondary-color);
}

/* Buttons */
.btn {
    display: inline-block;
    padding: 10px 20px;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    cursor: pointer;
    font-size: 1rem;
    font-weight: 600;
    transition: var(--transition);
    text-align: center;
}

.btn:hover {
    background-color: var(--secondary-color);
    transform: translateY(-2px);
    box-shadow: var(--box-shadow);
}

.btn:active {
    transform: translateY(0);
}

.btn-primary {
    background-color: var(--primary-color);
}

.btn-secondary {
    background-color: var(--gray-color);
}

.btn-success {
    background-color: var(--success-color);
}

.btn-warning {
    background-color: var(--warning-color);
    color: var(--dark-color);
}

.btn-danger {
    background-color: var(--danger-color);
}

.btn-small {
    padding: 6px 12px;
    font-size: 0.9rem;
}

.btn-block {
    display: block;
    width: 100%;
}

.btn-icon {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 1.2rem;
    color: var(--dark-color);
    padding: 5px;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.btn-icon:hover {
    background-color: var(--light-gray);
}

/* Navigation */
.navbar {
    background-color: white;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 100;
}

.nav-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    max-width: 1200px;
    margin: 0 auto;
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: 10px;
}

.nav-brand i {
    font-size: 2rem;
    color: var(--accent-color);
}

.nav-brand h1 {
    margin: 0;
    font-size: 1.8rem;
    color: var(--primary-color);
}

.nav-menu {
    display: flex;
    align-items: center;
    gap: 25px;
}

.nav-link {
    display: flex;
    align-items: center;
    gap: 5px;
    font-weight: 600;
    padding: 8px 12px;
    border-radius: var(--border-radius);
}

.nav-link:hover, .nav-link.active {
    background-color: var(--light-gray);
    color: var(--primary-color);
}

.nav-user {
    display: flex;
    align-items: center;
    gap: 15px;
}

.nav-user span {
    font-weight: 600;
    color: var(--primary-color);
}

.menu-toggle {
    display: none;
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--dark-color);
}

/* Authentication Section */
.auth-container {
    display: flex;
    gap: 40px;
    padding: 40px 0;
    min-height: 80vh;
    align-items: center;
}

.auth-card {
    flex: 1;
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    padding: 30px;
}

.auth-card h2 {
    color: var(--primary-color);
    margin-bottom: 10px;
}

.tagline {
    color: var(--gray-color);
    margin-bottom: 30px;
    font-size: 1.1rem;
}

.auth-tabs {
    display: flex;
    margin-bottom: 25px;
    border-bottom: 1px solid var(--light-gray);
}

.auth-tab {
    padding: 10px 20px;
    background: none;
    border: none;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--gray-color);
    cursor: pointer;
    position: relative;
}

.auth-tab.active {
    color: var(--primary-color);
}

.auth-tab.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: var(--primary-color);
}

.auth-form {
    display: none;
}

.auth-form.active {
    display: block;
}

.demo-note {
    margin-top: 15px;
    font-size: 0.9rem;
    color: var(--gray-color);
    font-style: italic;
    text-align: center;
}

/* Quote Card */
.quote-card {
    flex: 1;
    background-color: var(--primary-color);
    color: white;
    border-radius: var(--border-radius);
    padding: 30px;
    box-shadow: var(--box-shadow);
}

.quote-card h3 {
    color: white;
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 20px;
}

.quote-card p {
    font-size: 1.2rem;
    font-style: italic;
    margin-bottom: 10px;
}

.quote-author {
    text-align: right;
    font-weight: 600;
}

.dashboard-quote {
    margin-bottom: 30px;
}

/* Dashboard */
.header-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 30px 0 20px;
}

.stats-card {
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    padding: 25px;
    margin-bottom: 30px;
}

.progress-container {
    margin-top: 15px;
}

.progress-bar {
    width: 100%;
    height: 25px;
    background-color: var(--light-gray);
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 10px;
}

.progress-fill {
    height: 100%;
    background-color: var(--accent-color);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 600;
    min-width: 40px;
    transition: width 0.5s ease;
}

.date-display {
    color: var(--gray-color);
    font-weight: 600;
    margin-top: 10px;
}

/* Habits */
.habits-container {
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    padding: 25px;
    margin-bottom: 30px;
}

.habits-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.habit-card {
    background-color: white;
    border-left: 5px solid var(--primary-color);
    border-radius: var(--border-radius);
    padding: 20px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    transition: var(--transition);
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.habit-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
}

.habit-info h4 {
    margin-bottom: 5px;
}

.habit-meta {
    display: flex;
    gap: 15px;
    font-size: 0.9rem;
    color: var(--gray-color);
    margin-top: 8px;
}

.habit-actions {
    display: flex;
    gap: 10px;
}

.habit-status {
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: var(--transition);
}

.status-pending {
    background-color: var(--warning-color);
    color: var(--dark-color);
}

.status-completed {
    background-color: var(--success-color);
    color: white;
}

/* Feed */
.feed-intro {
    background-color: white;
    border-radius: var(--border-radius);
    padding: 20px;
    margin-bottom: 25px;
    box-shadow: var(--box-shadow);
}

.feed-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 25px;
    margin-bottom: 30px;
}

.user-card {
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    overflow: hidden;
    transition: var(--transition);
}

.user-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
}

.user-header {
    background-color: var(--primary-color);
    color: white;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.user-header h4 {
    color: white;
    margin: 0;
}

.user-habits {
    padding: 20px;
}

.user-habit-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid var(--light-gray);
}

.user-habit-item:last-child {
    border-bottom: none;
}

.user-progress {
    padding: 15px 20px;
    background-color: var(--light-gray);
    font-weight: 600;
}

/* Explore Users */
.search-box {
    display: flex;
    gap: 10px;
}

.search-box input {
    flex: 1;
    padding: 10px 15px;
    border: 1px solid var(--light-gray);
    border-radius: var(--border-radius);
    font-size: 1rem;
}

.users-container {
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    padding: 25px;
    margin-bottom: 30px;
    min-height: 200px;
}

.user-result {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    border-bottom: 1px solid var(--light-gray);
}

.user-result:last-child {
    border-bottom: none;
}

.user-details h4 {
    margin-bottom: 5px;
}

.user-details p {
    color: var(--gray-color);
    font-size: 0.9rem;
    margin: 0;
}

.following-section {
    background-color: white;
    border-radius: var(--border-radius);
    box-shadow: var(--box-shadow);
    padding: 25px;
}

.following-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 15px;
    margin-top: 20px;
}

.following-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    background-color: var(--light-gray);
    border-radius: var(--border-radius);
}

/* Modal */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 200;
    align-items: center;
    justify-content: center;
}

.modal-content {
    background-color: white;
    border-radius: var(--border-radius);
    width: 90%;
    max-width: 500px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    overflow: hidden;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px;
    background-color: var(--primary-color);
    color: white;
}

.modal-header h3 {
    color: white;
    margin: 0;
}

.close-modal {
    background: none;
    border: none;
    color: white;
    font-size: 1.8rem;
    cursor: pointer;
    line-height: 1;
}

.modal-body {
    padding: 20px;
}

/* Form Elements */
.form-group {
    margin-bottom: 20px;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
}

.form-group input,
.form-group select {
    width: 100%;
    padding: 12px 15px;
    border: 1px solid var(--light-gray);
    border-radius: var(--border-radius);
    font-size: 1rem;
    transition: var(--transition);
}

.form-group input:focus,
.form-group select:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(74, 111, 165, 0.2);
}

.form-actions {
    display: flex;
    justify-content: flex-end;
    gap: 15px;
    margin-top: 25px;
}

/* Footer */
.footer {
    background-color: var(--dark-color);
    color: white;
    padding: 20px 0;
    margin-top: 40px;
}

.footer-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    text-align: center;
}

.footer-note {
    font-size: 0.9rem;
    color: var(--light-gray);
    margin-top: 10px;
}

/* Responsive Design */
@media (max-width: 992px) {
    .auth-container {
        flex-direction: column;
    }
    
    .auth-card, .quote-card {
        width: 100%;
    }
    
    .habits-list {
        grid-template-columns: 1fr;
    }
    
    .feed-container {
        grid-template-columns: 1fr;
    }
}

@media (max-width: 768px) {
    .nav-menu {
        position: fixed;
        top: 70px;
        left: 0;
        width: 100%;
        background-color: white;
        flex-direction: column;
        align-items: flex-start;
        padding: 20px;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        display: none;
    }
    
    .nav-menu.show {
        display: flex;
    }
    
    .nav-user {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        width: 100%;
    }
    
    .menu-toggle {
        display: block;
    }
    
    .header-row {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
    }
    
    .search-box {
        flex-direction: column;
        width: 100%;
    }
}

@media (max-width: 576px) {
    .container {
        padding: 0 15px;
    }
    
    .nav-container {
        padding: 15px;
    }
    
    .auth-card, .quote-card, .stats-card, .habits-container {
        padding: 20px;
    }
    
    .modal-content {
        width: 95%;
    }
}
/* HabMate - Theme Styles (Light/Dark Mode) */

/* Dark mode styles */
body.dark-mode {
    background-color: #121212;
    color: #e0e0e0;
}

body.dark-mode h1,
body.dark-mode h2,
body.dark-mode h3,
body.dark-mode h4 {
    color: #ffffff;
}

body.dark-mode .navbar {
    background-color: #1e1e1e;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
}

body.dark-mode .nav-brand h1 {
    color: var(--accent-color);
}

body.dark-mode .nav-link:hover,
body.dark-mode .nav-link.active {
    background-color: #2d2d2d;
}

body.dark-mode .auth-card,
body.dark-mode .stats-card,
body.dark-mode .habits-container,
body.dark-mode .feed-intro,
body.dark-mode .users-container,
body.dark-mode .following-section,
body.dark-mode .modal-content,
body.dark-mode .habit-card {
    background-color: #1e1e1e;
    color: #e0e0e0;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

body.dark-mode .form-group input,
body.dark-mode .form-group select {
    background-color: #2d2d2d;
    border-color: #3d3d3d;
    color: #e0e0e0;
}

body.dark-mode .form-group input:focus,
body.dark-mode .form-group select:focus {
    border-color: var(--accent-color);
    box-shadow: 0 0 0 3px rgba(79, 195, 161, 0.2);
}

body.dark-mode .btn-icon:hover {
    background-color: #2d2d2d;
}

body.dark-mode .btn-secondary {
    background-color: #3d3d3d;
}

body.dark-mode .search-box input {
    background-color: #2d2d2d;
    border-color: #3d3d3d;
    color: #e0e0e0;
}

body.dark-mode .user-habit-item {
    border-bottom-color: #3d3d3d;
}

body.dark-mode .user-progress {
    background-color: #2d2d2d;
}

body.dark-mode .following-item {
    background-color: #2d2d2d;
}

body.dark-mode .progress-bar {
    background-color: #2d2d2d;
}

body.dark-mode .footer {
    background-color: #0a0a0a;
}

body.dark-mode .footer-note {
    color: #a0a0a0;
}
</style>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <i class="fas fa-leaf"></i>
                <h1>HabMate</h1>
            </div>
            <div class="nav-menu">
                <a href="#" id="navDashboard" class="nav-link"><i class="fas fa-home"></i> Dashboard</a>
                <a href="#" id="navFeed" class="nav-link"><i class="fas fa-users"></i> Community Feed</a>
                <a href="#" id="navExplore" class="nav-link"><i class="fas fa-search"></i> Explore Users</a>
                <div class="nav-user">
                    <span id="currentUser">Guest</span>
                    <button id="themeToggle" class="btn-icon"><i class="fas fa-moon"></i></button>
                    <button id="logoutBtn" class="btn btn-secondary">Logout</button>
                </div>
            </div>
            <button class="menu-toggle" id="menuToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Authentication Section (shown when not logged in) -->
    <section id="authSection" class="container">
        <div class="auth-container">
            <div class="auth-card">
                <h2>Welcome to HabMate</h2>
                <p class="tagline">Track your habits, follow friends, build a better you.</p>
                
                <div class="auth-tabs">
                    <button id="loginTab" class="auth-tab active">Login</button>
                    <button id="registerTab" class="auth-tab">Register</button>
                </div>
                
                <!-- Login Form -->
                <form id="loginForm" class="auth-form active">
                    <div class="form-group">
                        <label for="loginEmail">Email</label>
                        <input type="email" id="loginEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" placeholder="Enter your password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Login</button>
                    <p class="demo-note">Demo: Use email "demo@habmate.com" with any password</p>
                </form>
                
                <!-- Register Form -->
                <form id="registerForm" class="auth-form">
                    <div class="form-group">
                        <label for="registerUsername">Username</label>
                        <input type="text" id="registerUsername" placeholder="Choose a username" required>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email</label>
                        <input type="email" id="registerEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" placeholder="Create a password" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-block">Create Account</button>
                </form>
            </div>
            
            <div class="quote-card">
                <h3><i class="fas fa-quote-left"></i> Daily Motivation</h3>
                <p id="motivationalQuote">"We are what we repeatedly do. Excellence, then, is not an act, but a habit." - Aristotle</p>
                <p class="quote-author" id="quoteAuthor">- Aristotle</p>
            </div>
        </div>
    </section>

    <!-- Main App Section (hidden when not logged in) -->
    <section id="appSection" class="container" style="display: none;">
        <!-- Dashboard -->
        <div id="dashboardView" class="view">
            <div class="header-row">
                <h2><i class="fas fa-chart-line"></i> Your Dashboard</h2>
                <button id="addHabitBtn" class="btn btn-primary">
                    <i class="fas fa-plus"></i> Add New Habit
                </button>
            </div>
            
            <!-- Daily Progress -->
            <div class="stats-card">
                <h3><i class="fas fa-calendar-day"></i> Today's Progress</h3>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill">0%</div>
                    </div>
                    <span id="progressText">0 of 0 habits completed</span>
                </div>
                <p class="date-display" id="todayDate"></p>
            </div>
            
            <!-- Motivational Quote -->
            <div class="quote-card dashboard-quote">
                <h3><i class="fas fa-lightbulb"></i> Today's Inspiration</h3>
                <p id="dashboardQuote">"The secret of getting ahead is getting started." - Mark Twain</p>
                <button id="newQuoteBtn" class="btn btn-small">New Quote</button>
            </div>
            
            <!-- Habits List -->
            <div class="habits-container">
                <h3><i class="fas fa-tasks"></i> Your Daily Habits</h3>
                <div id="habitsList" class="habits-list">
                    <!-- Habits will be dynamically added here -->
                </div>
            </div>
        </div>
        
        <!-- Community Feed -->
        <div id="feedView" class="view" style="display: none;">
            <div class="header-row">
                <h2><i class="fas fa-users"></i> Community Feed</h2>
                <button id="refreshFeedBtn" class="btn btn-secondary">
                    <i class="fas fa-sync-alt"></i> Refresh Feed
                </button>
            </div>
            
            <div class="feed-intro">
                <p>See how your friends are doing with their habits. You can only see users you follow.</p>
            </div>
            
            <div id="feedContainer" class="feed-container">
                <!-- Feed cards will be dynamically added here -->
            </div>
        </div>
        
        <!-- Explore Users -->
        <div id="exploreView" class="view" style="display: none;">
            <div class="header-row">
                <h2><i class="fas fa-search"></i> Explore Users</h2>
                <div class="search-box">
                    <input type="text" id="userSearch" placeholder="Search by username or email">
                    <button id="searchBtn" class="btn btn-primary">
                        <i class="fas fa-search"></i> Search
                    </button>
                </div>
            </div>
            
            <div id="searchResults" class="users-container">
                <!-- Search results will appear here -->
            </div>
            
            <!-- Following List -->
            <div class="following-section">
                <h3><i class="fas fa-user-friends"></i> People You Follow</h3>
                <div id="followingList" class="following-list">
                    <!-- Following list will appear here -->
                </div>
            </div>
        </div>
        
        <!-- Add Habit Modal -->
<div id="addHabitModal" class="modal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Add New Habit</h3>
            <button class="close-modal">&times;</button>
        </div>
        <div class="modal-body">
            <form id="habitForm">
                <div class="form-group">
                    <label for="habitName">Habit Name</label>
                    <input type="text" id="habitName" placeholder="e.g., Drink 8 glasses of water" required>
                </div>
                <div class="form-group">
                    <label for="habitTime">Best Time of Day</label>
                    <select id="habitTime">
                        <option value="morning">Morning</option>
                        <option value="afternoon">Afternoon</option>
                        <option value="evening">Evening</option>
                        <option value="anytime" selected>Anytime</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="habitCategory">Category</label>
                    <select id="habitCategory">
                        <option value="health">Health & Fitness</option>
                        <option value="learning">Learning</option>
                        <option value="productivity">Productivity</option>
                        <option value="mindfulness">Mindfulness</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary close-modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Habit</button>
                </div>
            </form>
        </div>
    </div>
</div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>HabMate &copy; 2023 - A habit tracking project for college evaluation</p>
            <p class="footer-note">All data is stored locally in your browser using LocalStorage</p>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script>
        /**
 * HabMate - Utility Functions
 * Contains helper functions used across the application
 */

// Generate a unique ID for new items
function generateId() {
    return Date.now().toString(36) + Math.random().toString(36).substr(2);
}

// Format date to display nicely
function formatDate(date) {
    return date.toLocaleDateString('en-US', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
    });
}

// Check if two dates are the same day (ignoring time)
function isSameDay(date1, date2) {
    return date1.getFullYear() === date2.getFullYear() &&
           date1.getMonth() === date2.getMonth() &&
           date1.getDate() === date2.getDate();
}

// Get today's date at midnight (for comparison)
function getToday() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    return today;
}

// Get data from LocalStorage
function getStorageItem(key) {
    try {
        const item = localStorage.getItem(key);
        return item ? JSON.parse(item) : null;
    } catch (error) {
        console.error('Error reading from LocalStorage:', error);
        return null;
    }
}

// Save data to LocalStorage
function setStorageItem(key, value) {
    try {
        localStorage.setItem(key, JSON.stringify(value));
        return true;
    } catch (error) {
        console.error('Error writing to LocalStorage:', error);
        return false;
    }
}

// Remove data from LocalStorage
function removeStorageItem(key) {
    try {
        localStorage.removeItem(key);
        return true;
    } catch (error) {
        console.error('Error removing from LocalStorage:', error);
        return false;
    }
}

// Show notification message to user
function showNotification(message, type = 'info') {
    // Remove any existing notification
    const existingNotification = document.querySelector('.notification');
    if (existingNotification) {
        existingNotification.remove();
    }
    
    // Create notification element
    const notification = document.createElement('div');
    notification.className = `notification notification-${type}`;
    notification.textContent = message;
    
    // Add styles
    notification.style.position = 'fixed';
    notification.style.top = '20px';
    notification.style.right = '20px';
    notification.style.padding = '15px 20px';
    notification.style.borderRadius = 'var(--border-radius)';
    notification.style.boxShadow = 'var(--box-shadow)';
    notification.style.zIndex = '1000';
    notification.style.fontWeight = '600';
    notification.style.maxWidth = '300px';
    
    // Set color based on type
    if (type === 'success') {
        notification.style.backgroundColor = 'var(--success-color)';
        notification.style.color = 'white';
    } else if (type === 'error') {
        notification.style.backgroundColor = 'var(--danger-color)';
        notification.style.color = 'white';
    } else if (type === 'warning') {
        notification.style.backgroundColor = 'var(--warning-color)';
        notification.style.color = 'var(--dark-color)';
    } else {
        notification.style.backgroundColor = 'var(--primary-color)';
        notification.style.color = 'white';
    }
    
    // Add to page
    document.body.appendChild(notification);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (notification.parentNode) {
            notification.remove();
        }
    }, 5000);
}

// Toggle theme between light and dark mode
function toggleTheme() {
    const body = document.body;
    const isDarkMode = body.classList.contains('dark-mode');
    const themeIcon = document.querySelector('#themeToggle i');
    
    if (isDarkMode) {
        body.classList.remove('dark-mode');
        themeIcon.className = 'fas fa-moon';
        setStorageItem('habmate-theme', 'light');
        showNotification('Switched to light mode', 'info');
    } else {
        body.classList.add('dark-mode');
        themeIcon.className = 'fas fa-sun';
        setStorageItem('habmate-theme', 'dark');
        showNotification('Switched to dark mode', 'info');
    }
}

// Initialize theme from LocalStorage
function initTheme() {
    const savedTheme = getStorageItem('habmate-theme') || 'light';
    const body = document.body;
    const themeIcon = document.querySelector('#themeToggle i');
    
    if (savedTheme === 'dark') {
        body.classList.add('dark-mode');
        themeIcon.className = 'fas fa-sun';
    } else {
        body.classList.remove('dark-mode');
        themeIcon.className = 'fas fa-moon';
    }
    
    // Add event listener to theme toggle button
    const themeToggleBtn = document.getElementById('themeToggle');
    if (themeToggleBtn) {
        themeToggleBtn.addEventListener('click', toggleTheme);
    }
}

// Array of motivational quotes
const motivationalQuotes = [
    { quote: "We are what we repeatedly do. Excellence, then, is not an act, but a habit.", author: "Aristotle" },
    { quote: "The secret of getting ahead is getting started.", author: "Mark Twain" },
    { quote: "Small daily improvements are the key to staggering long-term results.", author: "Unknown" },
    { quote: "Your future is created by what you do today, not tomorrow.", author: "Robert Kiyosaki" },
    { quote: "Motivation is what gets you started. Habit is what keeps you going.", author: "Jim Ryun" },
    { quote: "Success is the sum of small efforts, repeated day in and day out.", author: "Robert Collier" },
    { quote: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
    { quote: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
    { quote: "The best way to predict your future is to create it.", author: "Peter Drucker" },
    { quote: "It's not about perfect. It's about effort.", author: "Jillian Michaels" },
    { quote: "Every day is a chance to be better than yesterday.", author: "Unknown" },
    { quote: "Your habits determine your future.", author: "Jack Canfield" },
    { quote: "Consistency is the key to achieving your goals.", author: "Unknown" },
    { quote: "The journey of a thousand miles begins with a single step.", author: "Lao Tzu" },
    { quote: "Good habits are the foundation of success.", author: "Brian Tracy" }
];

// Get a random motivational quote
function getRandomQuote() {
    const randomIndex = Math.floor(Math.random() * motivationalQuotes.length);
    return motivationalQuotes[randomIndex];
}

// Display a motivational quote
function displayMotivationalQuote(elementId = 'motivationalQuote', authorId = 'quoteAuthor') {
    const quoteElement = document.getElementById(elementId);
    const authorElement = document.getElementById(authorId);
    
    if (quoteElement && authorElement) {
        const randomQuote = getRandomQuote();
        quoteElement.textContent = `"${randomQuote.quote}"`;
        authorElement.textContent = `- ${randomQuote.author}`;
    }
}

// Initialize the application when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Initialize theme
    initTheme();
    
    // Display initial motivational quote
    displayMotivationalQuote();
    
    // Add event listener for new quote button
    const newQuoteBtn = document.getElementById('newQuoteBtn');
    if (newQuoteBtn) {
        newQuoteBtn.addEventListener('click', function() {
            displayMotivationalQuote('dashboardQuote');
        });
    }
});
    </script>
    <script>
        /**
 * HabMate - Authentication Module
 * Handles user registration, login, and session management
 */

// Initialize authentication when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Check if user is already logged in
    checkLoginStatus();
    
    // Set up authentication event listeners
    setupAuthListeners();
});

// Check if a user is already logged in
function checkLoginStatus() {
    const currentUser = getStorageItem('currentUser');
    
    if (currentUser) {
        // User is logged in, show app section
        document.getElementById('authSection').style.display = 'none';
        document.getElementById('appSection').style.display = 'block';
        document.getElementById('currentUser').textContent = currentUser.username;
    } else {
        // User is not logged in, show auth section
        document.getElementById('authSection').style.display = 'block';
        document.getElementById('appSection').style.display = 'none';
        document.getElementById('currentUser').textContent = 'Guest';
    }
}

// Set up authentication form listeners
function setupAuthListeners() {
    // Tab switching between login and register
    const loginTab = document.getElementById('loginTab');
    const registerTab = document.getElementById('registerTab');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    
    if (loginTab && registerTab) {
        loginTab.addEventListener('click', function() {
            loginTab.classList.add('active');
            registerTab.classList.remove('active');
            loginForm.classList.add('active');
            registerForm.classList.remove('active');
        });
        
        registerTab.addEventListener('click', function() {
            registerTab.classList.add('active');
            loginTab.classList.remove('active');
            registerForm.classList.add('active');
            loginForm.classList.remove('active');
        });
    }
    
    // Login form submission
    const loginFormElement = document.getElementById('loginForm');
    if (loginFormElement) {
        loginFormElement.addEventListener('submit', function(e) {
            e.preventDefault();
            handleLogin();
        });
    }
    
    // Register form submission
    const registerFormElement = document.getElementById('registerForm');
    if (registerFormElement) {
        registerFormElement.addEventListener('submit', function(e) {
            e.preventDefault();
            handleRegistration();
        });
    }
    
    // Logout button
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
        logoutBtn.addEventListener('click', handleLogout);
    }
}

// Handle user login
function handleLogin() {
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    
    // Basic validation
    if (!email || !password) {
        showNotification('Please fill in all fields', 'error');
        return;
    }
    
    // Demo user (for testing without registration)
    if (email === 'demo@habmate.com') {
        // Create demo user data if it doesn't exist
        let demoUser = getStorageItem('user_demo');
        if (!demoUser) {
            demoUser = {
                id: 'demo_user',
                username: 'Demo User',
                email: 'demo@habmate.com',
                password: 'demo123', // In a real app, passwords should be hashed
                createdAt: new Date().toISOString()
            };
            
            // Save demo user
            setStorageItem('user_demo', demoUser);
            
            // Initialize demo user's habits
            const demoHabits = [
                {
                    id: generateId(),
                    userId: 'demo_user',
                    name: 'Drink 8 glasses of water',
                    category: 'health',
                    timeOfDay: 'anytime',
                    completed: false,
                    createdAt: new Date().toISOString(),
                    lastUpdated: new Date().toISOString()
                },
                {
                    id: generateId(),
                    userId: 'demo_user',
                    name: '30 minutes of exercise',
                    category: 'health',
                    timeOfDay: 'morning',
                    completed: true,
                    createdAt: new Date().toISOString(),
                    lastUpdated: new Date().toISOString()
                },
                {
                    id: generateId(),
                    userId: 'demo_user',
                    name: 'Read 20 pages',
                    category: 'learning',
                    timeOfDay: 'evening',
                    completed: false,
                    createdAt: new Date().toISOString(),
                    lastUpdated: new Date().toISOString()
                }
            ];
            
            setStorageItem('habits_demo_user', demoHabits);
        }
        
        // Log in as demo user
        loginUser(demoUser);
        return;
    }
    
    // Get all users from LocalStorage
    const users = getAllUsers();
    
    // Find user with matching email
    const user = users.find(u => u.email === email);
    
    if (!user) {
        showNotification('User not found. Please register first.', 'error');
        return;
    }
    
    // Check password (in a real app, compare hashed passwords)
    if (user.password !== password) {
        showNotification('Incorrect password', 'error');
        return;
    }
    
    // Login successful
    loginUser(user);
}

// Handle user registration
function handleRegistration() {
    const username = document.getElementById('registerUsername').value.trim();
    const email = document.getElementById('registerEmail').value.trim();
    const password = document.getElementById('registerPassword').value.trim();
    
    // Basic validation
    if (!username || !email || !password) {
        showNotification('Please fill in all fields', 'error');
        return;
    }
    
    if (password.length < 6) {
        showNotification('Password must be at least 6 characters', 'error');
        return;
    }
    
    // Get all users from LocalStorage
    const users = getAllUsers();
    
    // Check if email already exists
    const emailExists = users.some(u => u.email === email);
    if (emailExists) {
        showNotification('Email already registered. Please login instead.', 'error');
        return;
    }
    
    // Check if username already exists
    const usernameExists = users.some(u => u.username === username);
    if (usernameExists) {
        showNotification('Username already taken. Please choose another.', 'error');
        return;
    }
    
    // Create new user object
    const newUser = {
        id: generateId(),
        username: username,
        email: email,
        password: password, // In a real app, hash the password
        createdAt: new Date().toISOString(),
        followers: [],
        following: []
    };
    
    // Save user to LocalStorage
    saveUser(newUser);
    
    // Create empty habits array for the new user
    setStorageItem(`habits_${newUser.id}`, []);
    
    // Auto login after registration
    loginUser(newUser);
    
    showNotification('Account created successfully!', 'success');
}

// Login user and set session
function loginUser(user) {
    // Save user to current session
    setStorageItem('currentUser', user);
    
    // Update UI
    document.getElementById('authSection').style.display = 'none';
    document.getElementById('appSection').style.display = 'block';
    document.getElementById('currentUser').textContent = user.username;
    
    // Show dashboard
    showView('dashboardView');
    loadDashboard();
    
    // Reset login form
    document.getElementById('loginForm').reset();
    
    showNotification(`Welcome back, ${user.username}!`, 'success');
}

// Handle user logout
function handleLogout() {
    // Clear current user from LocalStorage
    removeStorageItem('currentUser');
    
    // Update UI
    document.getElementById('authSection').style.display = 'block';
    document.getElementById('appSection').style.display = 'none';
    document.getElementById('currentUser').textContent = 'Guest';
    
    // Switch to login tab
    document.getElementById('loginTab').classList.add('active');
    document.getElementById('registerTab').classList.remove('active');
    document.getElementById('loginForm').classList.add('active');
    document.getElementById('registerForm').classList.remove('active');
    
    // Reset forms
    document.getElementById('loginForm').reset();
    document.getElementById('registerForm').reset();
    
    showNotification('You have been logged out', 'info');
}

// Get all registered users from LocalStorage
function getAllUsers() {
    const users = [];
    
    // Get all keys from LocalStorage
    for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        
        // Check if key is a user (starts with 'user_')
        if (key.startsWith('user_')) {
            const user = getStorageItem(key);
            if (user) {
                users.push(user);
            }
        }
    }
    
    return users;
}

// Save a user to LocalStorage
function saveUser(user) {
    setStorageItem(`user_${user.id}`, user);
}

// Get a user by ID
function getUserById(userId) {
    return getStorageItem(`user_${userId}`);
}

// Get a user by email
function getUserByEmail(email) {
    const users = getAllUsers();
    return users.find(u => u.email === email);
}

// Get a user by username
function getUserByUsername(username) {
    const users = getAllUsers();
    return users.find(u => u.username === username);
}
    </script>
    <script>
        /**
 * HabMate - Habit Management Module
 * Handles creating, updating, deleting, and tracking habits
 */

// Initialize habits module when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Check if user is logged in
    const currentUser = getStorageItem('currentUser');
    
    // Set up habit-related event listeners
    setupHabitListeners();
    
    if (currentUser) {
        // Check if habits need to be reset for a new day
        checkAndResetHabits();
    }
});

// Set up habit-related event listeners
function setupHabitListeners() {
    // Add habit button
    const addHabitBtn = document.getElementById('addHabitBtn');
    if (addHabitBtn) {
        addHabitBtn.addEventListener('click', function() {
            document.getElementById('addHabitModal').style.display = 'flex';
        });
    }
    
    // Habit form submission
    const habitForm = document.getElementById('habitForm');
    if (habitForm) {
        habitForm.addEventListener('submit', function(e) {
            e.preventDefault();
            handleAddHabit();
        });
    }
    
    // Close modal when clicking outside or on close button
    const modal = document.getElementById('addHabitModal');
    const closeButtons = document.querySelectorAll('.close-modal');
    
    if (modal) {
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
    }
    
    closeButtons.forEach(button => {
        button.addEventListener('click', function() {
            if (modal) modal.style.display = 'none';
        });
    });
}

// Handle adding a new habit
function handleAddHabit() {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) {
        showNotification('Please login to add habits', 'error');
        return;
    }
    
    // Get form values
    const name = document.getElementById('habitName').value.trim();
    const timeOfDay = document.getElementById('habitTime').value;
    const category = document.getElementById('habitCategory').value;
    
    // Validate
    if (!name) {
        showNotification('Please enter a habit name', 'error');
        return;
    }
    
    // Create new habit object
    const newHabit = {
        id: generateId(),
        userId: currentUser.id,
        name: name,
        timeOfDay: timeOfDay,
        category: category,
        completed: false,
        createdAt: new Date().toISOString(),
        lastUpdated: new Date().toISOString(),
        // Track completion history
        history: []
    };
    
    // Get current user's habits
    const userHabits = getUserHabits(currentUser.id);
    
    // Add new habit
    userHabits.push(newHabit);
    
    // Save to LocalStorage
    setStorageItem(`habits_${currentUser.id}`, userHabits);
    
    // Close modal and reset form
    const modal = document.getElementById('addHabitModal');
    if (modal) modal.style.display = 'none';
    
    const habitForm = document.getElementById('habitForm');
    if (habitForm) habitForm.reset();
    
    // Refresh habits list
    loadHabits();
    
    // Update progress
    updateProgress();
    
    showNotification('Habit added successfully!', 'success');
}

// Load and display user's habits
function loadHabits() {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    // Get user's habits
    const habits = getUserHabits(currentUser.id);
    
    // Get container element
    const habitsList = document.getElementById('habitsList');
    if (!habitsList) return;
    
    // Clear container
    habitsList.innerHTML = '';
    
    if (habits.length === 0) {
        habitsList.innerHTML = `
            <div class="empty-state" style="text-align: center; padding: 40px 20px;">
                <i class="fas fa-clipboard-list fa-3x" style="color: var(--gray-color); margin-bottom: 20px;"></i>
                <h4 style="color: var(--gray-color); margin-bottom: 10px;">No habits yet</h4>
                <p style="color: var(--gray-color);">Start by adding your first habit using the "Add New Habit" button above.</p>
            </div>
        `;
        return;
    }
    
    // Add each habit to the list
    habits.forEach(habit => {
        const habitElement = createHabitElement(habit);
        habitsList.appendChild(habitElement);
    });
}

// Create HTML element for a habit
function createHabitElement(habit) {
    const habitCard = document.createElement('div');
    habitCard.className = 'habit-card';
    habitCard.dataset.id = habit.id;
    
    // Determine category icon
    let categoryIcon = 'fas fa-star';
    let categoryText = 'Other';
    if (habit.category === 'health') {
        categoryIcon = 'fas fa-heartbeat';
        categoryText = 'Health & Fitness';
    } else if (habit.category === 'learning') {
        categoryIcon = 'fas fa-book';
        categoryText = 'Learning';
    } else if (habit.category === 'productivity') {
        categoryIcon = 'fas fa-briefcase';
        categoryText = 'Productivity';
    } else if (habit.category === 'mindfulness') {
        categoryIcon = 'fas fa-spa';
        categoryText = 'Mindfulness';
    }
    
    // Determine time icon
    let timeIcon = 'fas fa-clock';
    let timeText = 'Anytime';
    if (habit.timeOfDay === 'morning') {
        timeIcon = 'fas fa-sun';
        timeText = 'Morning';
    } else if (habit.timeOfDay === 'afternoon') {
        timeIcon = 'fas fa-sun';
        timeText = 'Afternoon';
    } else if (habit.timeOfDay === 'evening') {
        timeIcon = 'fas fa-moon';
        timeText = 'Evening';
    }
    
    // Determine status button text and class
    const statusText = habit.completed ? 'Completed' : 'Pending';
    const statusClass = habit.completed ? 'status-completed' : 'status-pending';
    
    habitCard.innerHTML = `
        <div class="habit-info">
            <h4>${habit.name}</h4>
            <div class="habit-meta">
                <span><i class="${categoryIcon}"></i> ${categoryText}</span>
                <span><i class="${timeIcon}"></i> ${timeText}</span>
            </div>
        </div>
        <div class="habit-actions">
            <button class="habit-status ${statusClass}" data-id="${habit.id}">
                ${statusText}
            </button>
            <button class="btn-icon delete-habit" data-id="${habit.id}" title="Delete habit">
                <i class="fas fa-trash"></i>
            </button>
        </div>
    `;
    
    // Add event listeners
    const statusBtn = habitCard.querySelector('.habit-status');
    statusBtn.addEventListener('click', function() {
        toggleHabitStatus(habit.id);
    });
    
    const deleteBtn = habitCard.querySelector('.delete-habit');
    deleteBtn.addEventListener('click', function() {
        deleteHabit(habit.id);
    });
    
    return habitCard;
}

// Toggle habit completion status
function toggleHabitStatus(habitId) {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    // Get user's habits
    const habits = getUserHabits(currentUser.id);
    
    // Find the habit
    const habitIndex = habits.findIndex(h => h.id === habitId);
    if (habitIndex === -1) return;
    
    // Toggle completion status
    habits[habitIndex].completed = !habits[habitIndex].completed;
    habits[habitIndex].lastUpdated = new Date().toISOString();
    
    // Add to history if completed
    if (habits[habitIndex].completed) {
        if (!habits[habitIndex].history) {
            habits[habitIndex].history = [];
        }
        habits[habitIndex].history.push(new Date().toISOString());
    }
    
    // Save to LocalStorage
    setStorageItem(`habits_${currentUser.id}`, habits);
    
    // Update UI
    loadHabits();
    updateProgress();
    
    // Show notification
    const status = habits[habitIndex].completed ? 'completed' : 'marked as pending';
    showNotification(`Habit "${habits[habitIndex].name}" ${status}!`, 'success');
}

// Delete a habit
function deleteHabit(habitId) {
    if (!confirm('Are you sure you want to delete this habit?')) {
        return;
    }
    
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    // Get user's habits
    const habits = getUserHabits(currentUser.id);
    
    // Filter out the habit to delete
    const updatedHabits = habits.filter(h => h.id !== habitId);
    
    // Save to LocalStorage
    setStorageItem(`habits_${currentUser.id}`, updatedHabits);
    
    // Update UI
    loadHabits();
    updateProgress();
    
    showNotification('Habit deleted successfully', 'info');
}

// Get user's habits from LocalStorage
function getUserHabits(userId) {
    const habits = getStorageItem(`habits_${userId}`) || [];
    
    // Ensure each habit has the required properties
    return habits.map(habit => {
        return {
            id: habit.id || generateId(),
            userId: habit.userId || userId,
            name: habit.name || 'Unnamed Habit',
            timeOfDay: habit.timeOfDay || 'anytime',
            category: habit.category || 'other',
            completed: habit.completed || false,
            createdAt: habit.createdAt || new Date().toISOString(),
            lastUpdated: habit.lastUpdated || new Date().toISOString(),
            history: habit.history || []
        };
    });
}

// Update progress display
function updateProgress() {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    // Get user's habits
    const habits = getUserHabits(currentUser.id);
    
    if (habits.length === 0) {
        document.getElementById('progressFill').style.width = '0%';
        document.getElementById('progressFill').textContent = '0%';
        document.getElementById('progressText').textContent = '0 of 0 habits completed';
        return;
    }
    
    // Calculate completion percentage
    const completedCount = habits.filter(h => h.completed).length;
    const totalCount = habits.length;
    const percentage = Math.round((completedCount / totalCount) * 100);
    
    // Update progress bar
    const progressFill = document.getElementById('progressFill');
    if (progressFill) {
        progressFill.style.width = `${percentage}%`;
        progressFill.textContent = `${percentage}%`;
    }
    
    // Update progress text
    const progressText = document.getElementById('progressText');
    if (progressText) {
        progressText.textContent = `${completedCount} of ${totalCount} habits completed`;
    }
}

// Check if habits need to be reset for a new day
function checkAndResetHabits() {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    // Get today's date (at midnight)
    const today = getToday();
    
    // Get the last reset date from LocalStorage
    const lastResetKey = `lastReset_${currentUser.id}`;
    const lastReset = getStorageItem(lastResetKey);
    
    // If no last reset date or last reset was before today, reset habits
    if (!lastReset || !isSameDay(new Date(lastReset), today)) {
        resetDailyHabits(currentUser.id);
        setStorageItem(lastResetKey, today.toISOString());
    }
}

// Reset all habits to not completed for the new day
function resetDailyHabits(userId) {
    const habits = getUserHabits(userId);
    
    // Only reset if there are habits
    if (habits.length === 0) return;
    
    // Check if any habits were completed yesterday
    const hadCompletedHabits = habits.some(h => h.completed);
    
    // Reset all habits to not completed
    const resetHabits = habits.map(habit => {
        return {
            ...habit,
            completed: false,
            lastUpdated: new Date().toISOString()
        };
    });
    
    // Save reset habits
    setStorageItem(`habits_${userId}`, resetHabits);
    
    // Show notification if habits were reset
    if (hadCompletedHabits) {
        showNotification('A new day has started! All habits have been reset.', 'info');
    }
    
    // Update UI if user is on dashboard
    const dashboardView = document.getElementById('dashboardView');
    if (dashboardView && dashboardView.style.display !== 'none') {
        loadHabits();
        updateProgress();
    }
}

// Load motivational quote for dashboard
function loadMotivationalQuote() {
    displayMotivationalQuote('dashboardQuote');
}
    </script>
    <script>
        /**
 * HabMate - Social Features Module
 * Handles user search, follow/unfollow functionality
 */

// Initialize social module when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Check if user is logged in
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    // Set up social event listeners
    setupSocialListeners();
    
    // Load following list if on explore page
    if (document.getElementById('exploreView').style.display !== 'none') {
        loadFollowingList();
    }
});

// Set up social event listeners
function setupSocialListeners() {
    // User search
    const searchBtn = document.getElementById('searchBtn');
    if (searchBtn) {
        searchBtn.addEventListener('click', handleUserSearch);
    }
    
    // User search on Enter key
    const userSearchInput = document.getElementById('userSearch');
    if (userSearchInput) {
        userSearchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleUserSearch();
            }
        });
    }
}

// Handle user search
function handleUserSearch() {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) {
        showNotification('Please login to search users', 'error');
        return;
    }
    
    const searchTerm = document.getElementById('userSearch').value.trim();
    
    if (!searchTerm) {
        showNotification('Please enter a username or email to search', 'error');
        return;
    }
    
    // Get all users
    const allUsers = getAllUsers();
    
    // Filter out current user
    const otherUsers = allUsers.filter(user => user.id !== currentUser.id);
    
    // Search by username or email (case-insensitive)
    const searchResults = otherUsers.filter(user => 
        user.username.toLowerCase().includes(searchTerm.toLowerCase()) ||
        user.email.toLowerCase().includes(searchTerm.toLowerCase())
    );
    
    // Display results
    displaySearchResults(searchResults, currentUser.id);
}

// Display user search results
function displaySearchResults(users, currentUserId) {
    const resultsContainer = document.getElementById('searchResults');
    if (!resultsContainer) return;
    
    // Clear previous results
    resultsContainer.innerHTML = '';
    
    if (users.length === 0) {
        resultsContainer.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-search fa-3x"></i>
                <h4>No users found</h4>
                <p>Try searching with a different username or email address.</p>
            </div>
        `;
        return;
    }
    
    // Create result elements
    users.forEach(user => {
        const userElement = createUserResultElement(user, currentUserId);
        resultsContainer.appendChild(userElement);
    });
}

// Create HTML element for a user search result
function createUserResultElement(user, currentUserId) {
    const userDiv = document.createElement('div');
    userDiv.className = 'user-result';
    
    // Get current user's following list
    const currentUser = getUserById(currentUserId);
    const isFollowing = currentUser.following && currentUser.following.includes(user.id);
    
    // Get user's habits to show count
    const userHabits = getUserHabits(user.id);
    const habitCount = userHabits.length;
    
    userDiv.innerHTML = `
        <div class="user-details">
            <h4>${user.username}</h4>
            <p>${user.email}  ${habitCount} habit${habitCount !== 1 ? 's' : ''}</p>
        </div>
        <button class="btn ${isFollowing ? 'btn-secondary' : 'btn-primary'} follow-btn" data-userid="${user.id}">
            ${isFollowing ? 'Unfollow' : 'Follow'}
        </button>
    `;
    
    // Add event listener to follow/unfollow button
    const followBtn = userDiv.querySelector('.follow-btn');
    followBtn.addEventListener('click', function() {
        toggleFollow(user.id);
    });
    
    return userDiv;
}

// Toggle follow/unfollow for a user
function toggleFollow(targetUserId) {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    // Get target user
    const targetUser = getUserById(targetUserId);
    if (!targetUser) {
        showNotification('User not found', 'error');
        return;
    }
    
    // Can't follow yourself
    if (targetUserId === currentUser.id) {
        showNotification('You cannot follow yourself', 'error');
        return;
    }
    
    // Initialize following/followers arrays if they don't exist
    if (!currentUser.following) currentUser.following = [];
    if (!targetUser.followers) targetUser.followers = [];
    
    const isFollowing = currentUser.following.includes(targetUserId);
    
    if (isFollowing) {
        // Unfollow
        currentUser.following = currentUser.following.filter(id => id !== targetUserId);
        targetUser.followers = targetUser.followers.filter(id => id !== currentUser.id);
        
        showNotification(`You unfollowed ${targetUser.username}`, 'info');
    } else {
        // Follow
        currentUser.following.push(targetUserId);
        targetUser.followers.push(currentUser.id);
        
        showNotification(`You are now following ${targetUser.username}`, 'success');
    }
    
    // Save both users
    saveUser(currentUser);
    saveUser(targetUser);
    
    // Update current user in session
    setStorageItem('currentUser', currentUser);
    
    // Refresh UI
    if (document.getElementById('exploreView').style.display !== 'none') {
        // Reload search results and following list
        handleUserSearch();
        loadFollowingList();
    }
    
    // Refresh feed if on feed page
    if (document.getElementById('feedView').style.display !== 'none') {
        loadCommunityFeed();
    }
}

// Load and display users that current user is following
function loadFollowingList() {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    const followingList = document.getElementById('followingList');
    if (!followingList) return;
    
    // Clear list
    followingList.innerHTML = '';
    
    // Check if user is following anyone
    if (!currentUser.following || currentUser.following.length === 0) {
        followingList.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-user-friends fa-2x"></i>
                <h4>Not following anyone yet</h4>
                <p>Search for users above and follow them to see their progress in your feed.</p>
            </div>
        `;
        return;
    }
    
    // Add each followed user to the list
    currentUser.following.forEach(userId => {
        const user = getUserById(userId);
        if (user) {
            const followingItem = createFollowingItem(user);
            followingList.appendChild(followingItem);
        }
    });
}

// Create HTML element for a following list item
function createFollowingItem(user) {
    const itemDiv = document.createElement('div');
    itemDiv.className = 'following-item';
    
    // Get user's habits to calculate progress
    const userHabits = getUserHabits(user.id);
    const completedCount = userHabits.filter(h => h.completed).length;
    const totalCount = userHabits.length;
    const progressPercentage = totalCount > 0 ? Math.round((completedCount / totalCount) * 100) : 0;
    
    itemDiv.innerHTML = `
        <div class="user-details">
            <h4>${user.username}</h4>
            <p>${progressPercentage}% completed today</p>
        </div>
        <button class="btn btn-secondary unfollow-btn" data-userid="${user.id}">
            Unfollow
        </button>
    `;
    
    // Add event listener to unfollow button
    const unfollowBtn = itemDiv.querySelector('.unfollow-btn');
    unfollowBtn.addEventListener('click', function() {
        toggleFollow(user.id);
    });
    
    return itemDiv;
}

// Get users that the current user is following
function getFollowingUsers(currentUserId) {
    const currentUser = getUserById(currentUserId);
    if (!currentUser || !currentUser.following) return [];
    
    return currentUser.following.map(userId => getUserById(userId)).filter(user => user !== null);
}
    </script>
    <script>
        /**
 * HabMate - Community Feed Module
 * Displays followed users' progress in a feed
 */

// Initialize feed module when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    // Check if user is logged in
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    // Set up feed event listeners
    setupFeedListeners();
});

// Set up feed event listeners
function setupFeedListeners() {
    // Refresh feed button
    const refreshBtn = document.getElementById('refreshFeedBtn');
    if (refreshBtn) {
        refreshBtn.addEventListener('click', loadCommunityFeed);
    }
}

// Load and display community feed
function loadCommunityFeed() {
    const currentUser = getStorageItem('currentUser');
    if (!currentUser) return;
    
    const feedContainer = document.getElementById('feedContainer');
    if (!feedContainer) return;
    
    // Clear feed
    feedContainer.innerHTML = '';
    
    // Get users that current user is following
    const followingUsers = getFollowingUsers(currentUser.id);
    
    if (followingUsers.length === 0) {
        feedContainer.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-users fa-3x"></i>
                <h4>Your feed is empty</h4>
                <p>Follow other users to see their progress here.</p>
                <a href="#" id="goToExplore" class="btn btn-primary" style="margin-top: 15px;">
                    Explore Users
                </a>
            </div>
        `;
        
        // Add event listener to "Explore Users" button
        const goToExploreBtn = document.getElementById('goToExplore');
        if (goToExploreBtn) {
            goToExploreBtn.addEventListener('click', function(e) {
                e.preventDefault();
                showView('exploreView');
                loadExplore();
            });
        }
        
        return;
    }
    
    // Add each followed user's progress to the feed
    followingUsers.forEach(user => {
        const feedCard = createFeedCard(user);
        feedContainer.appendChild(feedCard);
    });
}

// Create a feed card for a user
function createFeedCard(user) {
    // Get user's habits
    const userHabits = getUserHabits(user.id);
    
    // Calculate progress
    const completedCount = userHabits.filter(h => h.completed).length;
    const totalCount = userHabits.length;
    const progressPercentage = totalCount > 0 ? Math.round((completedCount / totalCount) * 100) : 0;
    
    // Create card element
    const card = document.createElement('div');
    card.className = 'user-card';
    
    // Build habits list HTML
    let habitsHtml = '';
    if (userHabits.length === 0) {
        habitsHtml = '<p class="no-habits">No habits added yet.</p>';
    } else {
        // Show only up to 5 habits
        const habitsToShow = userHabits.slice(0, 5);
        
        habitsHtml = habitsToShow.map(habit => {
            const statusIcon = habit.completed ? 'fas fa-check-circle text-success' : 'fas fa-clock text-warning';
            const statusText = habit.completed ? 'Completed' : 'Pending';
            
            return `
                <div class="user-habit-item">
                    <span>${habit.name}</span>
                    <span><i class="${statusIcon}"></i> ${statusText}</span>
                </div>
            `;
        }).join('');
        
        // Show "and X more" if there are more habits
        if (userHabits.length > 5) {
            habitsHtml += `
                <div class="user-habit-item">
                    <span>and ${userHabits.length - 5} more habit${userHabits.length - 5 !== 1 ? 's' : ''}</span>
                </div>
            `;
        }
    }
    
    // Determine progress color
    let progressColor = 'var(--warning-color)';
    if (progressPercentage >= 80) progressColor = 'var(--success-color)';
    else if (progressPercentage >= 50) progressColor = 'var(--accent-color)';
    
    card.innerHTML = `
        <div class="user-header">
            <div>
                <h4>${user.username}</h4>
                <p>${user.email}</p>
            </div>
            <div class="progress-circle" style="width: 50px; height: 50px; border-radius: 50%; background: conic-gradient(${progressColor} ${progressPercentage}%, #eee ${progressPercentage}%); display: flex; align-items: center; justify-content: center;">
                <div style="width: 40px; height: 40px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                    <span style="font-weight: 600;">${progressPercentage}%</span>
                </div>
            </div>
        </div>
        <div class="user-habits">
            <h5>Today's Habits</h5>
            ${habitsHtml}
        </div>
        <div class="user-progress">
            <div style="display: flex; justify-content: space-between;">
                <span>Daily Progress</span>
                <span>${completedCount}/${totalCount} completed</span>
            </div>
        </div>
    `;
    
    return card;
}
    </script>
    <script>
        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            const currentUser = localStorage.getItem('currentUser');
            if (currentUser) {
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('appSection').style.display = 'block';
                document.getElementById('currentUser').textContent = JSON.parse(currentUser).username;
                
                // Load dashboard by default
                showView('dashboardView');
                loadDashboard();
            }
            
            // Set today's date
            const today = new Date();
            document.getElementById('todayDate').textContent = today.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            // Navigation handlers
            document.getElementById('navDashboard').addEventListener('click', function(e) {
                e.preventDefault();
                showView('dashboardView');
                loadDashboard();
            });
            
            document.getElementById('navFeed').addEventListener('click', function(e) {
                e.preventDefault();
                showView('feedView');
                loadFeed();
            });
            
            document.getElementById('navExplore').addEventListener('click', function(e) {
                e.preventDefault();
                showView('exploreView');
                loadExplore();
            });
            
            // Menu toggle for mobile
            document.getElementById('menuToggle').addEventListener('click', function() {
                document.querySelector('.nav-menu').classList.toggle('show');
            });
            
            // Close modal when clicking outside
            document.getElementById('addHabitModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.style.display = 'none';
                }
            });
            
            // Close modal buttons
            document.querySelectorAll('.close-modal').forEach(button => {
                button.addEventListener('click', function() {
                    document.getElementById('addHabitModal').style.display = 'none';
                });
            });
        });
        
        // Helper function to show/hide views
        function showView(viewId) {
            // Hide all views
            document.querySelectorAll('.view').forEach(view => {
                view.style.display = 'none';
            });
            
            // Show the selected view
            document.getElementById(viewId).style.display = 'block';
            
            // Update active nav link
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            if (viewId === 'dashboardView') {
                document.getElementById('navDashboard').classList.add('active');
            } else if (viewId === 'feedView') {
                document.getElementById('navFeed').classList.add('active');
            } else if (viewId === 'exploreView') {
                document.getElementById('navExplore').classList.add('active');
            }
        }
        
        // Load dashboard data
        function loadDashboard() {
            // This will be implemented in habits.js
            if (typeof loadHabits === 'function') {
                loadHabits();
            }
            
            // Update progress
            if (typeof updateProgress === 'function') {
                updateProgress();
            }
            
            // Load a motivational quote
            if (typeof loadMotivationalQuote === 'function') {
                loadMotivationalQuote();
            }
        }
        
        // Load community feed
        function loadFeed() {
            // This will be implemented in feed.js
            if (typeof loadCommunityFeed === 'function') {
                loadCommunityFeed();
            }
        }
        
        // Load explore page
        function loadExplore() {
            // This will be implemented in social.js
            if (typeof loadFollowingList === 'function') {
                loadFollowingList();
            }
        }
    </script>
</body>
</html>
